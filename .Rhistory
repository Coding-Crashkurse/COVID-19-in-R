library(tidyverse)
library(data.table)
df <- data.table::fread("./data/COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
View(df)
head(hdf)
head(hf)
head(df)
View(df)
death_global_link <- "https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
df <- data.table::fread(death_global_link)
read_csv(death_global_link)
library(readr)
read_csv(death_global_link)
df <- read_csv(death_global_link)
View(df)
death_global_link <- getURL("https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv")
library(RCurl)
death_global_link <- getURL("https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv")
death_global_link <- getURL("https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", ssl.verifypeer = FALSE)
death_global_link <- getURL("https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", ssl.verifypeer=TRUE, sslversion=4L)
library(RCurl)
death_global_link <- getURL("https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", ssl.verifypeer=TRUE, sslversion=4L)
death_global_link <- "https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
weather_data_link <- "http://databank.worldbank.org/data/download/catalog/cckp_historical_data_0.xls"
df <- read_csv(url(death_global_link))
urlfile="https://raw.githubusercontent.com/lrjoshi/webpage/master/public/post/c159s.csv"
mydata<-read_csv(url(urlfile))
View(mydata)
death_global_link <- "https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
df <- read_csv(url(death_global_link))
df <- data.table::fread(url(death_global_link))
url(death_global_link)
df <- data.table::fread(death_global_link)
View(df)
death_global_link <- "https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
death_global_link
df <- data.table::fread(death_global_link)
df <- data.table::fread(death_global_link, fill = TRUE)
df <- data.table::fread(death_global_link)
df <- data.table::fread(death_global_link, sep = ";")
df <- data.table::fread(death_global_link, quote = "\"")
View(df)
death_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"
df <- data.table::fread(death_global_link)
View(df)
library(openxlsx)
openxlsx::read.xlsx(weather_data_link)
library(readxl)
read_excel(weather_data_link)
tf = tempfile(fileext = ".xls")
curl::curl_download(weather_data_link, tf)
readxl::read_excel(tf, ...)
readxl::read_excel(tf)
readxl::read_excel(tf, sheet = 4)
readxl::read_excel(tf, sheet = 1)
weather_df <- readxl::read_excel(tf, sheet = 4)
library(tidyverse)
library(data.table)
library(openxlsx)
library(RCurl)
library(readr)
library(readxl)
death_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv" # auf Raw klicken
cases_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv" # auf Raw klicken
weather_data_link <- "http://databank.worldbank.org/data/download/catalog/cckp_historical_data_0.xls"
tf = tempfile(fileext = ".xls")
curl::curl_download(weather_data_link, tf)
deaths_df <- data.table::fread(death_global_link)
cases_df <- data.table::fread(cases_global_link)
weather_df <- readxl::read_excel(tf, sheet = 4)
View(weather_df)
globalcolnames <- colnames(cases_df)[5:length(colnames(cases_df))]
globalcolnames
deaths_df <- deaths_df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
cases_df <- deaths_df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
cases_df <- cases_df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
View(cases_df)
View(deaths_df)
colnames(df) <- df[1, ]
df <- data.table::fread(cases_global_link)
weather_df <- readxl::read_excel(tf, sheet = 4)
df <- df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
colnames(df) <- df[1, ]
df <- df[-1, ]
df <- data.frame(lapply(df, as.numeric))
library(tidyverse)
library(data.table)
library(openxlsx)
library(RCurl)
library(readr)
library(readxl)
# Read in all data
cases_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv" # auf Raw klicken
weather_data_link <- "http://databank.worldbank.org/data/download/catalog/cckp_historical_data_0.xls"
tf = tempfile(fileext = ".xls")
curl::curl_download(weather_data_link, tf)
df <- data.table::fread(cases_global_link)
weather_df <- readxl::read_excel(tf, sheet = 4)
## EDA
globalcolnames <- colnames(df)[5:length(colnames(df))]
df <- df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
colnames(df) <- df[1, ]
df <- df[-1, ]
df <- data.frame(lapply(df, as.numeric))
View(df)
View(weather_df)
library(tidyverse)
library(data.table)
library(openxlsx)
library(RCurl)
library(readr)
library(readxl)
# Read in all data
cases_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv" # auf Raw klicken
weather_data_link <- "http://databank.worldbank.org/data/download/catalog/cckp_historical_data_0.xls"
tf = tempfile(fileext = ".xls")
curl::curl_download(weather_data_link, tf)
df <- data.table::fread(cases_global_link)
weather_df <- readxl::read_excel(tf, sheet = 4)
## EDA
globalcolnames <- colnames(df)[5:length(colnames(df))]
df <- df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
df
View(df)
View(df)
colnames(df) <- df[1, ]
colnames(df)
df <- df[-1, ]
df
View(df)
data.frame(lapply(df, as.numeric))
data.frame(sapply(df, as.numeric))
rownames(df)
dates <- rownames(df)
df$dates <- dates
View(df)
df <- data.frame(lapply(df, as.numeric))
df$dates <- dates
View(df)
df$dates
class(df$dates)
df$dates <- as.Dates(dates)
df$dates <- as.Date(dates)
df$dates <- as.Date(dates, "%m/%d/%Y")
class(df$dates)
library(lubridate)
by_month <- df %>%
group_by(month = floor_date(dates, "month")) %>%
summarise_all(list(sum))
by_month <- df %>%
group_by(month = floor_date(dates, "month"))
by_month
by_month <- df %>%
group_by(month = floor_date(dates, "month")) %>%
summarise_if(is.numeric, sum, na.rm = TRUE)
by_month
library(ggplot)
library(ggplot2)
df
ggplot(data=df, aes(x=dates, y=Germany, group=1)) +
geom_line(color="red")
View(by_month)
View(df)
View(df)
df$Germany
df$Germany - lag(df$Germany)
df$Germany - lag(df$Germany, default = 0)
df <- data.frame(lapply(df, as.numeric))
df
df %>%
mutate_if(is.numeric, funs(. - lag(., default = 0)))
df %>%
mutate_if(~is.numeric(.x), ~(.x - lag(.x, default = 0)))
library(tidyverse)
library(data.table)
library(openxlsx)
library(RCurl)
library(readr)
library(readxl)
library(lubridate)
library(ggplot2)
# Read in all data
cases_global_link <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv" # auf Raw klicken
weather_data_link <- "http://databank.worldbank.org/data/download/catalog/cckp_historical_data_0.xls"
tf = tempfile(fileext = ".xls")
curl::curl_download(weather_data_link, tf)
df <- data.table::fread(cases_global_link)
weather_df <- readxl::read_excel(tf, sheet = 4)
## EDA
globalcolnames <- colnames(df)[5:length(colnames(df))]
df <- df %>%
select(-c(`Province/State`, Lat, Long)) %>%
group_by(`Country/Region`) %>%
summarise_all(list(sum)) %>%
t() %>%
as.data.frame()
colnames(df) <- df[1, ]
df <- df[-1, ]
dates <- rownames(df)
df <- data.frame(lapply(df, as.numeric))
df <- df %>%
mutate_if(~is.numeric(.x), ~(.x - lag(.x, default = 0)))
df$dates <- as.Date(dates, "%m/%d/%Y")
View(df)
ggplot(data=df, aes(x=dates, y=Germany, group=1)) +
geom_line(color="red")
ggplot(data=df, aes(x=dates, y=Argentina, group=1)) +
geom_line(color="red")
ggplot(data=df, aes(x=dates, y=Germany, group=1)) +
geom_line(color="red")
by_month <- df %>%
group_by(month = floor_date(dates, "month")) %>%
summarise_if(is.numeric, sum, na.rm = TRUE)
by_month
weather_df
weather_df %>%
select(-Annual_temp) %>%
t() %>%
as.data.frame()
w_df <- weather_df %>%
select(-Annual_temp) %>%
t() %>%
as.data.frame()
View(weather_df)
w_df <- weather_df %>%
select(-Annual_temp) %>%
t() %>%
as.data.frame()
View(weather_df)
View(w_df)
colnames(w_df) <- w_df[1, ]
colnames(w_df)
colnames(w_df) <- w_df[1, ]
w_df <- w_df[-1, ]
w_df
View(w_df)
w_df$DEU
class(w_df$DEU)
cbind(w_df$DEU)
cbind(as.numeric(w_df$DEU))
cbind(as.numeric(w_df$DEU)[1:11])
cbind(as.numeric(w_df$DEU), by_month$Germany)
cbind(as.numeric(w_df$DEU)[1:11], by_month$Germany)
cbind(as.numeric(w_df$DEU)[4:10], by_month$Germany[4:10])
cbind(scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10]))
cbind(by_month$month[4:10], scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10]))
View(by_month)
by_month
by_month$month
by_month$month[4:10]
cbind(by_month$month[4:10], scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10]))
cbind(as.Date(by_month$month[4:10]), scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10]))
data.frame(cbind(by_month$month[4:10], scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10])))
cbind(as.character(by_month$month[4:10]), scale(as.numeric(w_df$DEU)[4:10]), scale(by_month$Germany[4:10]))
cbind(c(by_month$month[4:10]), c(scale(as.numeric(w_df$DEU)[4:10])), c(scale(by_month$Germany[4:10])))
cbind(by_month$month[4:10], c(scale(as.numeric(w_df$DEU)[4:10])), c(scale(by_month$Germany[4:10])))
data.frame(by_month$month[4:10], c(scale(as.numeric(w_df$DEU)[4:10])), c(scale(by_month$Germany[4:10])))
comparison <- data.frame(by_month$month[4:10], c(scale(as.numeric(w_df$DEU)[4:10])), c(scale(by_month$Germany[4:10]))) %>%
setnames(c("Date", "Temperature", "Cases"))
comparison
comparison %>%
melt(id="Date")
comparison <- comparison %>%
melt(id="Date")
ggplot(data=comparison, aes(x=Date, y=value, colour=variable)) + geom_line()
comparison <- data.frame(by_month$month[4:10], c(scale(as.numeric(w_df$DEU)[4:10])), c(scale(by_month$Germany[4:10]))) %>%
setnames(c("Date", "Temperature", "Cases"))
cor.test(comparison$Temperature,comparison$Cases,method="spearman")
